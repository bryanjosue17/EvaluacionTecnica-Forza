import{a as dt,b as ht,c as ft,d as gt,e as bt,f as vt,g as It,h as Ct,i as _t,j as wt,k as yt,l as kt,m as St}from"./chunk-BGLK7GEC.js";import{a as y}from"./chunk-KKRHNXEK.js";import{a as L,c as ut}from"./chunk-NUEAGB3S.js";import{a as k,b as pt,c as Pt}from"./chunk-VQTON5AL.js";import{Aa as V,Ba as $,C as O,Ca as G,D as j,Da as w,Db as st,Eb as ct,Fa as f,Fb as lt,Ga as U,Ha as J,Hb as mt,Ia as K,K as u,O as I,Q as d,R as F,S as n,T as r,U as p,W as B,X as x,Y as C,db as Q,ea as m,eb as W,fa as D,fb as X,ga as R,gb as Y,hb as Z,ib as q,k as g,l as E,m as A,ma as _,pb as tt,r as h,rb as et,ta as N,u as b,ua as H,ub as ot,v as s,vb as it,w as v,wb as nt,xb as rt,yb as at,z as M,za as z}from"./chunk-V5BBYBEN.js";import"./chunk-QL7EMX3B.js";import"./chunk-KISXJL5B.js";import"./chunk-HJQ5J22D.js";import"./chunk-HC6MZPB3.js";import"./chunk-763F6G4M.js";import"./chunk-TPFYUTHI.js";import"./chunk-WND7HVWL.js";import"./chunk-Z6EYHB5B.js";import"./chunk-ZRULQIYR.js";import"./chunk-D3ZZG42Y.js";import"./chunk-PNSU6RTT.js";import"./chunk-MM5QLNJM.js";import"./chunk-WTBOK45U.js";import"./chunk-DLDB5PET.js";import"./chunk-JXIEZMHN.js";import"./chunk-IDJ2LIQM.js";import"./chunk-MCRJI3T3.js";import"./chunk-QVBGS5B3.js";import"./chunk-GAXET6VH.js";import"./chunk-6A2YPY52.js";import"./chunk-5W6SV7YT.js";import"./chunk-33E37TNX.js";import"./chunk-3R6QK3UX.js";import"./chunk-WYPTRRHD.js";import"./chunk-4WFVMWDK.js";import"./chunk-MDMZPGPE.js";import"./chunk-B43CU5JX.js";import"./chunk-TQEIIVVC.js";import"./chunk-X7ZBJCWB.js";import"./chunk-LF5XB4YN.js";import{g as l}from"./chunk-LDRJ6W7P.js";var S=()=>{let t=s(y),c=s(f);return t.isLogged()?!0:(c.navigate(["/login"]),!1)};var xt=[{path:"",pathMatch:"full",redirectTo:"dashboard"},{path:"dashboard",loadComponent:()=>import("./chunk-GKVYFVNE.js").then(t=>t.DashboardPage)},{path:"products",loadComponent:()=>import("./chunk-USKWENR3.js").then(t=>t.ProductsPage)},{path:"product/:id",loadComponent:()=>import("./chunk-AWZEOTXY.js").then(t=>t.ProductDetailPage)},{path:"cart",canActivate:[S],loadComponent:()=>import("./chunk-XCCVWUPE.js").then(t=>t.CartPage)},{path:"checkout",canActivate:[S],loadComponent:()=>import("./chunk-Z2JFBAOO.js").then(t=>t.CheckoutPage)},{path:"order/:id",canActivate:[S],loadComponent:()=>import("./chunk-3ECZ7EIC.js").then(t=>t.OrderPage)},{path:"login",loadComponent:()=>import("./chunk-X777BJT5.js").then(t=>t.LoginPage)},{path:"register",loadComponent:()=>import("./chunk-O5M6FU5R.js").then(t=>t.RegisterPage)},{path:"**",redirectTo:"dashboard"}];function Bt(t,c){if(t&1&&(n(0,"ion-breadcrumb",1),m(1),r()),t&2){let e=c.$implicit,i=c.index,o=C();F("active",i===o.breadcrumbs.length-1),d("routerLink",e.url),u(),R(" ",e.label," ")}}var Lt=(()=>{class t{constructor(){this.breadcrumbs=[],this.router=s(f)}ngOnInit(){this.router.events.pipe(g(e=>e instanceof w)).subscribe(e=>{this.updateBreadcrumbs(e.url)}),this.updateBreadcrumbs(this.router.url)}updateBreadcrumbs(e){let i=e.split("/").filter(o=>o);this.breadcrumbs=[],this.breadcrumbs.push({label:"Inicio",url:"/dashboard"}),i.length>0&&i.forEach((o,a)=>{let Ft="/"+i.slice(0,a+1).join("/"),T=this.getLabelForSegment(o);o==="product"&&i[a+1]&&(T="Producto"),this.breadcrumbs.push({label:T,url:Ft})})}getLabelForSegment(e){return{dashboard:"Dashboard",products:"Productos",product:"Producto",cart:"Carrito",checkout:"Checkout",login:"Login",register:"Registro",order:"Orden"}[e]||e.charAt(0).toUpperCase()+e.slice(1)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=v({type:t,selectors:[["app-breadcrumbs"]],standalone:!0,features:[_],decls:2,vars:1,consts:[[3,"routerLink","active",4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(i,o){i&1&&(n(0,"ion-breadcrumbs"),I(1,Bt,2,4,"ion-breadcrumb",0),r()),i&2&&(u(),d("ngForOf",o.breadcrumbs))},dependencies:[X,Y,N],styles:["ion-breadcrumbs[_ngcontent-%COMP%]{padding:8px 16px;background:var(--ion-color-light);border-bottom:1px solid var(--ion-color-light-shade)}ion-breadcrumb.active[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:600}ion-breadcrumb[_ngcontent-%COMP%]:not(.active){color:var(--ion-color-medium)}"]})}}return t})();function Dt(t,c){t&1&&(n(0,"ion-item",15),p(1,"ion-icon",16),n(2,"ion-label"),m(3,"Carrito"),r()())}function Rt(t,c){t&1&&(n(0,"ion-item",17),p(1,"ion-icon",18),n(2,"ion-label"),m(3,"Login"),r()())}function Nt(t,c){t&1&&(n(0,"ion-item",19),p(1,"ion-icon",20),n(2,"ion-label"),m(3,"Registro"),r()())}function Ht(t,c){if(t&1){let e=B();n(0,"ion-item",21),x("click",function(){O(e);let o=C();return j(o.logout())}),p(1,"ion-icon",22),n(2,"ion-label"),m(3,"Salir"),r()()}}var Tt=(()=>{class t{constructor(){this.auth=s(y),this.router=s(f),this.menu=s(pt),this.currentPageTitle="Ecom"}ngOnInit(){this.router.events.pipe(g(e=>e instanceof w)).subscribe(e=>{this.updatePageTitle(e.url)})}ngAfterViewInit(){return l(this,null,function*(){yield customElements.whenDefined("ion-menu"),yield this.menu.enable(!0,"main-menu");let e=yield this.menu.getMenus();console.log("[Menu] registrados:",e.map(a=>({id:a?.id}))),console.log("[Menu] isEnabled(main-menu):",yield this.menu.isEnabled("main-menu"));let i=document.querySelector("ion-menu#main-menu"),o=document.querySelector("#main");console.log("[Menu] menu.contentId=",i?.contentId," outlet.id=",o?.id)})}updatePageTitle(e){e.includes("/products")?this.currentPageTitle="Productos":e.includes("/cart")?this.currentPageTitle="Mi Carrito":e.includes("/checkout")?this.currentPageTitle="Finalizar Compra":e.includes("/dashboard")?this.currentPageTitle="Dashboard":e.includes("/login")?this.currentPageTitle="Iniciar Sesi\xF3n":e.includes("/register")?this.currentPageTitle="Registro":this.currentPageTitle="Ecom"}openMenu(){return l(this,null,function*(){try{yield customElements.whenDefined("ion-menu"),yield this.menu.enable(!0,"main-menu"),yield this.menu.open("main-menu")}catch(e){console.warn("openMenu() error",e)}})}logout(){this.auth.logout(),this.router.navigate(["/login"])}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=v({type:t,selectors:[["app-root"]],standalone:!0,features:[_],decls:30,vars:5,consts:[["id","main-menu","contentId","main","side","start","type","overlay"],["color","primary"],["auto-hide","false"],["routerLink","/dashboard"],["slot","start","name","home-outline"],["routerLink","/products"],["slot","start","name","pricetags-outline"],["routerLink","/cart",4,"ngIf"],["routerLink","/login",4,"ngIf"],["routerLink","/register",4,"ngIf"],[3,"click",4,"ngIf"],["slot","start"],["fill","clear",3,"click"],["name","menu-outline"],["id","main"],["routerLink","/cart"],["slot","start","name","cart-outline"],["routerLink","/login"],["slot","start","name","log-in-outline"],["routerLink","/register"],["slot","start","name","person-add-outline"],[3,"click"],["slot","start","name","log-out-outline"]],template:function(i,o){i&1&&(n(0,"ion-app")(1,"ion-menu",0)(2,"ion-header")(3,"ion-toolbar",1)(4,"ion-title"),m(5,"Ecom"),r()()(),n(6,"ion-content")(7,"ion-list")(8,"ion-menu-toggle",2)(9,"ion-item",3),p(10,"ion-icon",4),n(11,"ion-label"),m(12,"Dashboard"),r()(),n(13,"ion-item",5),p(14,"ion-icon",6),n(15,"ion-label"),m(16,"Productos"),r()(),I(17,Dt,4,0,"ion-item",7)(18,Rt,4,0,"ion-item",8)(19,Nt,4,0,"ion-item",9)(20,Ht,4,0,"ion-item",10),r()()()(),n(21,"ion-header")(22,"ion-toolbar",1)(23,"ion-buttons",11)(24,"ion-button",12),x("click",function(){return o.openMenu()}),p(25,"ion-icon",13),r()(),n(26,"ion-title"),m(27),r()()(),p(28,"app-breadcrumbs")(29,"ion-router-outlet",14),r()),i&2&&(u(17),d("ngIf",o.auth.isLogged()),u(),d("ngIf",!o.auth.isLogged()),u(),d("ngIf",!o.auth.isLogged()),u(),d("ngIf",o.auth.isLogged()),u(7),D(o.currentPageTitle))},dependencies:[W,rt,et,ct,st,tt,nt,ot,it,at,Q,mt,q,Z,U,H,Lt],encapsulation:2})}}return t})();var Et=(t,c)=>{let e=localStorage.getItem("access_token");return e&&(t=t.clone({setHeaders:{Authorization:`Bearer ${e}`}})),c(t)};var At=(()=>{class t{constructor(){this.lc=s(k),this.count=0}show(e="Procesando..."){return l(this,null,function*(){this.count++,!this.loading&&(this.loading=yield this.lc.create({message:e,spinner:"crescent"}),yield this.loading.present())})}hide(){return l(this,null,function*(){this.count=Math.max(0,this.count-1),this.count===0&&this.loading&&(yield this.loading.dismiss(),this.loading=void 0)})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Mt=(t,c)=>{let e=s(Pt),i=s(At);return c(t).pipe(E(o=>l(void 0,null,function*(){yield i.hide();let a="Ha ocurrido un error";throw o.status===0?a="Sin conexi\xF3n al servidor":o.status===401?a="No autorizado":o.status===404?a="No encontrado":typeof o.error=="string"?a=o.error:o.error?.message&&(a=o.error.message),yield e.show(a,"danger"),o})))};var Ot=(()=>{class t{constructor(e){this.lc=e,this.active=0}show(e="Cargando..."){return l(this,null,function*(){this.active++,this.loading||(this.loading=yield this.lc.create({message:e,backdropDismiss:!1,cssClass:"app-loader"}),yield this.loading.present())})}hide(){return l(this,null,function*(){if(this.active>0&&this.active--,this.active===0&&this.loading){try{yield this.loading.dismiss()}catch{}this.loading=void 0}})}forceClose(){return l(this,null,function*(){if(this.active=0,this.loading){try{yield this.loading.dismiss()}catch{}this.loading=void 0}})}static{this.\u0275fac=function(i){return new(i||t)(b(k))}}static{this.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var jt=(()=>{class t{constructor(e){this.loader=e,this.skip=[/\/health$/i,/\/ping$/i]}intercept(e,i){let o=this.skip.some(a=>a.test(e.url));return o||this.loader.show(),i.handle(e).pipe(A(()=>{o||this.loader.hide()}))}static{this.\u0275fac=function(i){return new(i||t)(b(Ot))}}static{this.\u0275prov=h({token:t,factory:t.\u0275fac})}}return t})();dt({homeOutline:vt,pricetagsOutline:yt,cartOutline:gt,logInOutline:It,personAddOutline:wt,logOutOutline:Ct,menuOutline:_t,add:ht,remove:kt,trash:St,basket:ft,eye:bt});G(Tt,{providers:[lt(),J(xt,K()),V($([Et,Mt])),{provide:z,useClass:jt,multi:!0},M(ut.forRoot({name:"__ecomdb",driverOrder:[L.IndexedDB,L.LocalStorage]}))]}).catch(t=>console.error(t));
