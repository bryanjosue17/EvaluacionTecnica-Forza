import{a as m}from"./chunk-S24QMSRQ.js";import{a as $}from"./chunk-6QGGOMUZ.js";import{a as q}from"./chunk-76FVMFA2.js";import"./chunk-YBY7T5CB.js";import{a as A,i as N}from"./chunk-BGLK7GEC.js";import{a as H}from"./chunk-KKRHNXEK.js";import"./chunk-NUEAGB3S.js";import{b as U}from"./chunk-VQTON5AL.js";import{C as f,D as h,Db as F,Eb as L,Fa as k,H as y,Hb as O,K as c,L as d,O as v,Q as _,S as n,T as e,U as D,W as g,X as s,Y as b,ea as o,fa as I,hb as w,ib as P,jb as T,kb as V,lb as M,ma as E,nb as R,pb as j,rb as B,ua as S,v as u,w as x}from"./chunk-V5BBYBEN.js";import"./chunk-QL7EMX3B.js";import"./chunk-KISXJL5B.js";import"./chunk-HJQ5J22D.js";import"./chunk-HC6MZPB3.js";import"./chunk-763F6G4M.js";import"./chunk-TPFYUTHI.js";import"./chunk-WND7HVWL.js";import"./chunk-Z6EYHB5B.js";import"./chunk-ZRULQIYR.js";import"./chunk-D3ZZG42Y.js";import"./chunk-PNSU6RTT.js";import"./chunk-MM5QLNJM.js";import"./chunk-WTBOK45U.js";import"./chunk-DLDB5PET.js";import"./chunk-JXIEZMHN.js";import"./chunk-IDJ2LIQM.js";import"./chunk-MCRJI3T3.js";import"./chunk-QVBGS5B3.js";import"./chunk-GAXET6VH.js";import"./chunk-6A2YPY52.js";import"./chunk-5W6SV7YT.js";import"./chunk-33E37TNX.js";import"./chunk-3R6QK3UX.js";import"./chunk-WYPTRRHD.js";import"./chunk-4WFVMWDK.js";import"./chunk-MDMZPGPE.js";import"./chunk-B43CU5JX.js";import"./chunk-TQEIIVVC.js";import"./chunk-X7ZBJCWB.js";import"./chunk-LF5XB4YN.js";import{g as C}from"./chunk-LDRJ6W7P.js";function G(a,z){if(a&1){let t=g();n(0,"ion-button",5),s("click",function(){f(t);let i=b();return h(i.go("/cart"))}),o(1," Ir al carrito "),e()}}function J(a,z){if(a&1){let t=g();n(0,"ion-button",8),s("click",function(){f(t);let i=b();return h(i.go("/login"))}),o(1," Inicia sesi\xF3n "),e()}}var lt=(()=>{class a{constructor(t,r,i){this.catalog=t,this.orders=r,this.auth=i,this.destroyRef=u(y),this.menu=u(U),this.router=u(k),A({menuOutline:N})}ngOnInit(){if(this.catalog.list(1,1).pipe(m(this.destroyRef)).subscribe(t=>this.totalProducts=t.total),this.auth.isLogged()){let t=()=>this.orders.getCart().pipe(m(this.destroyRef)).subscribe(r=>this.cartCount=r.items?.length??0);t(),this.orders.cartChanged$.pipe(m(this.destroyRef)).subscribe(()=>t())}else this.cartCount=0}openMenu(){return C(this,null,function*(){try{yield customElements.whenDefined("ion-menu"),yield this.menu.enable(!0,"main-menu"),yield this.menu.open("main-menu")}catch(t){console.warn("openMenu() error",t)}})}go(t){this.router.navigateByUrl(t)}static{this.\u0275fac=function(r){return new(r||a)(d($),d(q),d(H))}}static{this.\u0275cmp=x({type:a,selectors:[["app-dashboard"]],standalone:!0,features:[E],decls:30,vars:4,consts:[["color","light"],["slot","start"],["fill","clear",3,"click"],["name","menu-outline"],[1,"ion-padding"],["fill","outline","color","primary",3,"click"],["fill","outline","color","primary",3,"click",4,"ngIf"],["fill","outline","color","medium",3,"click",4,"ngIf"],["fill","outline","color","medium",3,"click"]],template:function(r,i){if(r&1&&(n(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-button",2),s("click",function(){return i.openMenu()}),D(4,"ion-icon",3),e()(),n(5,"ion-title"),o(6,"Dashboard"),e()()(),n(7,"ion-content",4)(8,"ion-card")(9,"ion-card-header")(10,"ion-card-title"),o(11,"Productos"),e()(),n(12,"ion-card-content")(13,"h2"),o(14),e(),n(15,"p"),o(16,"Total en cat\xE1logo"),e(),n(17,"ion-button",5),s("click",function(){return i.go("/products")}),o(18,"Ver cat\xE1logo"),e()()(),n(19,"ion-card")(20,"ion-card-header")(21,"ion-card-title"),o(22,"Carrito"),e()(),n(23,"ion-card-content")(24,"h2"),o(25),e(),n(26,"p"),o(27,"\xCDtems en tu carrito"),e(),v(28,G,2,0,"ion-button",6)(29,J,2,0,"ion-button",7),e()()()),r&2){let l,p;c(14),I((l=i.totalProducts)!==null&&l!==void 0?l:"\u2014"),c(11),I((p=i.cartCount)!==null&&p!==void 0?p:0),c(3),_("ngIf",i.auth.isLogged()),c(),_("ngIf",!i.auth.isLogged())}},dependencies:[j,B,F,L,T,M,R,V,w,P,O,S],encapsulation:2})}}return a})();export{lt as DashboardPage};
